<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}Dashboard{% endblock %} | SkillScore</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Inter',sans-serif;background:#0f172a;color:#e2e8f0;min-height:100vh}
a{text-decoration:none;color:inherit}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px}

.dash-layout{display:flex;min-height:100vh}

/* Sidebar */
.dash-sidebar{
  width:270px;background:rgba(15,23,42,.97);border-right:1px solid rgba(255,255,255,.06);
  display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:100;overflow-y:auto;
}
.dash-sidebar .brand{padding:24px 24px 20px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(255,255,255,.06)}
.brand .logo-icon{width:40px;height:40px;background:linear-gradient(135deg,#6366f1,#0ea5e9);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:18px;color:#fff;box-shadow:0 4px 16px rgba(99,102,241,.3)}
.brand span{font-size:20px;font-weight:700;color:#fff;letter-spacing:-.3px}
.brand span em{font-style:normal;background:linear-gradient(135deg,#818cf8,#38bdf8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.dash-sidebar .user-block{padding:20px 24px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(255,255,255,.06)}
.user-avatar{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,#6366f1,#8b5cf6);display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:#fff;flex-shrink:0}
.user-block .user-meta h4{font-size:14px;font-weight:600;color:#f1f5f9;margin:0}
.user-block .user-meta p{font-size:11px;color:rgba(255,255,255,.4);margin:3px 0 0;text-transform:capitalize}
.dash-sidebar nav{padding:16px 14px;flex:1}
.nav-label{font-size:10px;font-weight:600;color:rgba(255,255,255,.25);text-transform:uppercase;letter-spacing:1.2px;padding:12px 14px 8px;margin-top:4px}
.dash-sidebar nav a{display:flex;align-items:center;padding:11px 14px;border-radius:12px;margin-bottom:2px;font-size:13.5px;font-weight:400;transition:all .2s;color:rgba(255,255,255,.5)}
.dash-sidebar nav a:hover{background:rgba(255,255,255,.06);color:rgba(255,255,255,.9)}
.dash-sidebar nav a.active{background:linear-gradient(135deg,rgba(99,102,241,.18),rgba(14,165,233,.08));color:#fff;font-weight:500;border:1px solid rgba(99,102,241,.15)}
.dash-sidebar nav a i{width:20px;margin-right:12px;text-align:center;font-size:14px}
.dash-sidebar nav a.active i{color:#818cf8}
.dash-sidebar .sidebar-footer{padding:14px;border-top:1px solid rgba(255,255,255,.06)}
.dash-sidebar .sidebar-footer a{display:flex;align-items:center;padding:11px 14px;border-radius:12px;font-size:13.5px;color:rgba(255,255,255,.45);transition:all .2s}
.dash-sidebar .sidebar-footer a:hover{background:rgba(239,68,68,.12);color:#f87171}
.dash-sidebar .sidebar-footer a i{width:20px;margin-right:12px;text-align:center}

/* Main */
.dash-main{flex:1;margin-left:270px;display:flex;flex-direction:column;min-height:100vh}

/* Top Bar */
.dash-topbar{background:rgba(15,23,42,.85);backdrop-filter:blur(20px);padding:16px 32px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,.06);position:sticky;top:0;z-index:50}
.dash-topbar .page-title{font-size:18px;font-weight:700;color:#f1f5f9;letter-spacing:-.3px}
.topbar-right{display:flex;align-items:center;gap:12px}
.user-pill{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,.06);padding:7px 16px;border-radius:10px;font-size:13px;color:rgba(255,255,255,.7);border:1px solid rgba(255,255,255,.06)}
.user-pill i{color:#818cf8}
.logout-link{display:flex;align-items:center;gap:6px;border:1px solid rgba(255,255,255,.08);padding:7px 14px;border-radius:10px;font-size:13px;color:rgba(255,255,255,.45);transition:all .2s}
.logout-link:hover{background:rgba(239,68,68,.12);border-color:rgba(239,68,68,.2);color:#f87171}

/* Content */
.dash-content{padding:28px 32px;flex:1}

/* Flash */
.flash-msg{padding:14px 20px;border-radius:12px;margin-bottom:20px;font-size:13px;display:flex;align-items:center;gap:10px;animation:slideDown .3s ease}
.flash-msg.success{background:rgba(34,197,94,.12);color:#4ade80;border:1px solid rgba(34,197,94,.15)}
.flash-msg.danger{background:rgba(239,68,68,.12);color:#f87171;border:1px solid rgba(239,68,68,.15)}
.flash-msg.info{background:rgba(99,102,241,.12);color:#818cf8;border:1px solid rgba(99,102,241,.15)}
.flash-msg.warning{background:rgba(245,158,11,.12);color:#fbbf24;border:1px solid rgba(245,158,11,.15)}
@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}

/* Cards Grid */
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:16px;margin-bottom:28px}
.dash-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:24px 16px;text-align:center;transition:all .3s;display:flex;flex-direction:column;align-items:center;gap:12px}
.dash-card:hover{background:rgba(255,255,255,.08);transform:translateY(-4px);box-shadow:0 8px 30px rgba(0,0,0,.2)}
.card-icon{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:20px;color:#fff}
.card-label{font-size:13px;font-weight:500;color:rgba(255,255,255,.7)}

/* Colors */
.bg-blue{background:linear-gradient(135deg,#6366f1,#4f46e5)}
.bg-green{background:linear-gradient(135deg,#10b981,#059669)}
.bg-amber{background:linear-gradient(135deg,#f59e0b,#d97706)}
.bg-red{background:linear-gradient(135deg,#ef4444,#dc2626)}
.bg-purple{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}
.bg-cyan{background:linear-gradient(135deg,#06b6d4,#0891b2)}
.bg-slate{background:linear-gradient(135deg,#64748b,#475569)}
.bg-orange{background:linear-gradient(135deg,#f97316,#ea580c)}
.bg-teal{background:linear-gradient(135deg,#14b8a6,#0d9488)}
.bg-pink{background:linear-gradient(135deg,#ec4899,#db2777)}

/* Panel */
.dash-panel{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:24px;margin-bottom:24px;transition:all .3s}
.dash-panel:hover{background:rgba(255,255,255,.05)}
.dash-panel h3{font-size:15px;font-weight:600;color:#f1f5f9;margin-bottom:18px;display:flex;align-items:center;gap:10px}

/* Tables */
.dash-table{width:100%;border-collapse:collapse}
.dash-table th{background:rgba(255,255,255,.04);padding:12px 16px;text-align:left;font-size:11px;font-weight:600;color:rgba(255,255,255,.4);text-transform:uppercase;letter-spacing:.8px;border-bottom:1px solid rgba(255,255,255,.06)}
.dash-table td{padding:12px 16px;font-size:13.5px;color:rgba(255,255,255,.7);border-bottom:1px solid rgba(255,255,255,.04)}
.dash-table tbody tr{transition:background .2s}
.dash-table tbody tr:hover{background:rgba(255,255,255,.04)}

/* Buttons */
.btn{padding:8px 18px;border:none;border-radius:10px;font-size:13px;font-weight:500;cursor:pointer;transition:all .25s;font-family:'Inter',sans-serif;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:linear-gradient(135deg,#6366f1,#4f46e5);color:#fff;box-shadow:0 2px 10px rgba(99,102,241,.3)}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(99,102,241,.4)}
.btn-success{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 2px 10px rgba(16,185,129,.3)}
.btn-success:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(16,185,129,.4)}
.btn-danger{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;box-shadow:0 2px 10px rgba(239,68,68,.3)}
.btn-danger:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(239,68,68,.4)}
.btn-outline{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.7)}
.btn-outline:hover{background:rgba(255,255,255,.1);color:#fff}
.btn-sm{padding:6px 14px;font-size:12px;border-radius:8px}

/* Forms */
.form-input,.form-select{padding:10px 14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:10px;font-size:13.5px;font-family:'Inter',sans-serif;color:#e2e8f0;outline:none;transition:all .3s}
.form-input::placeholder{color:rgba(255,255,255,.3)}
.form-input:focus,.form-select:focus{border-color:rgba(99,102,241,.4);background:rgba(99,102,241,.06);box-shadow:0 0 0 3px rgba(99,102,241,.1)}
.form-select{-webkit-appearance:none;appearance:none;cursor:pointer}
.form-select option{background:#1e293b;color:#e2e8f0}

/* Badges */
.badge{display:inline-block;padding:4px 12px;border-radius:50px;font-size:12px;font-weight:500}
.badge-success{background:rgba(34,197,94,.15);color:#4ade80}
.badge-warning{background:rgba(245,158,11,.15);color:#fbbf24}
.badge-danger{background:rgba(239,68,68,.15);color:#f87171}
.badge-info{background:rgba(99,102,241,.15);color:#818cf8}

/* Announcements */
.announce-item{background:rgba(255,255,255,.04);padding:14px 18px;border-radius:12px;margin-bottom:10px;font-size:13.5px;color:rgba(255,255,255,.7);border-left:3px solid #6366f1;transition:all .2s}
.announce-item:hover{background:rgba(255,255,255,.06)}

/* Responsive */
@media(max-width:768px){
  .dash-sidebar{width:70px}
  .dash-sidebar .brand span,.dash-sidebar .user-meta,.dash-sidebar nav a span,.dash-sidebar .sidebar-footer a span,.nav-label{display:none}
  .dash-main{margin-left:70px}
  .cards-grid{grid-template-columns:repeat(2,1fr)}
  .dash-topbar{padding:14px 16px}
  .dash-content{padding:20px 16px}
}

{% block extra_css %}{% endblock %}
</style>
</head>
<body>
<div class="dash-layout">

  <!-- Sidebar -->
  <aside class="dash-sidebar">
    <div class="brand">
      <div class="logo-icon"><i class="fas fa-graduation-cap"></i></div>
      <span>Skill<em>Score</em></span>
    </div>

    <div class="user-block">
      <div class="user-avatar">{{ user.name[0]|upper if user.name else 'U' }}</div>
      <div class="user-meta">
        <h4>{{ user.name }}</h4>
        <p>{{ user.role }}</p>
      </div>
    </div>

    <nav>
      {% if user.role == 'admin' %}
        <div class="nav-label">Main</div>
        <a href="{{ url_for('admin_dashboard') }}" class="{{ 'active' if active_page == 'dashboard' }}"><i class="fas fa-th-large"></i> <span>Dashboard</span></a>
        <a href="{{ url_for('manage_users') }}" class="{{ 'active' if active_page == 'users' }}"><i class="fas fa-users"></i> <span>Manage Users</span></a>
        <div class="nav-label">Academic</div>
        <a href="{{ url_for('all_exams') }}" class="{{ 'active' if active_page == 'exams' }}"><i class="fas fa-file-pen"></i> <span>All Exams</span></a>
        <a href="{{ url_for('reports') }}" class="{{ 'active' if active_page == 'reports' }}"><i class="fas fa-chart-pie"></i> <span>Reports</span></a>
        <div class="nav-label">System</div>
        <a href="{{ url_for('settings') }}" class="{{ 'active' if active_page == 'settings' }}"><i class="fas fa-gear"></i> <span>Settings</span></a>
        <a href="{{ url_for('audit_logs') }}" class="{{ 'active' if active_page == 'audit_logs' }}"><i class="fas fa-clock-rotate-left"></i> <span>Audit Logs</span></a>
      {% elif user.role == 'teacher' %}
        <div class="nav-label">Main</div>
        <a href="{{ url_for('teacher_dashboard') }}" class="{{ 'active' if active_page == 'dashboard' }}"><i class="fas fa-th-large"></i> <span>Dashboard</span></a>
        <div class="nav-label">Content</div>
        <a href="{{ url_for('upload_notes') }}" class="{{ 'active' if active_page == 'upload_notes' }}"><i class="fas fa-upload"></i> <span>Upload Notes</span></a>
        <a href="{{ url_for('teacher_subject_notes') }}" class="{{ 'active' if active_page == 'subject_notes' }}"><i class="fas fa-book"></i> <span>Subject Notes</span></a>
        <a href="{{ url_for('teacher_placement_notes') }}" class="{{ 'active' if active_page == 'placement_notes' }}"><i class="fas fa-graduation-cap"></i> <span>Placement Notes</span></a>
        <div class="nav-label">Exams</div>
        <a href="{{ url_for('create_exam') }}" class="{{ 'active' if active_page == 'create_exam' }}"><i class="fas fa-pen-to-square"></i> <span>Create Exam</span></a>
        <a href="{{ url_for('view_results') }}" class="{{ 'active' if active_page == 'view_results' }}"><i class="fas fa-chart-bar"></i> <span>View Results</span></a>
        <a href="{{ url_for('exam_schedule') }}" class="{{ 'active' if active_page == 'exam_schedule' }}"><i class="fas fa-calendar"></i> <span>Exam Schedule</span></a>
        <a href="{{ url_for('attendance') }}" class="{{ 'active' if active_page == 'attendance' }}"><i class="fas fa-clipboard-check"></i> <span>Attendance</span></a>
      {% else %}
        <div class="nav-label">Main</div>
        <a href="{{ url_for('student_dashboard') }}" class="{{ 'active' if active_page == 'dashboard' }}"><i class="fas fa-th-large"></i> <span>Dashboard</span></a>
        <a href="{{ url_for('profile') }}" class="{{ 'active' if active_page == 'profile' }}"><i class="fas fa-user"></i> <span>Profile</span></a>
        <div class="nav-label">Learning</div>
        <a href="{{ url_for('subject_notes') }}" class="{{ 'active' if active_page == 'subject_notes' }}"><i class="fas fa-book"></i> <span>Subject Notes</span></a>
        <a href="{{ url_for('placement_notes') }}" class="{{ 'active' if active_page == 'placement_notes' }}"><i class="fas fa-graduation-cap"></i> <span>Placement Notes</span></a>
        <div class="nav-label">Assessment</div>
        <a href="{{ url_for('take_exam') }}" class="{{ 'active' if active_page == 'take_exam' }}"><i class="fas fa-file-alt"></i> <span>Exams</span></a>
        <a href="{{ url_for('aptitude') }}" class="{{ 'active' if active_page == 'aptitude' }}"><i class="fas fa-brain"></i> <span>Aptitude</span></a>
        <a href="{{ url_for('exam_result') }}" class="{{ 'active' if active_page == 'exam_result' }}"><i class="fas fa-chart-line"></i> <span>Exam Results</span></a>
        <div class="nav-label">Tools</div>
        <a href="{{ url_for('upload') }}" class="{{ 'active' if active_page == 'mcq_gen' }}"><i class="fas fa-robot"></i> <span>MCQ Generator</span></a>
      {% endif %}
    </nav>

    <div class="sidebar-footer">
      <a href="{{ url_for('logout') }}"><i class="fas fa-right-from-bracket"></i> <span>Logout</span></a>
    </div>
  </aside>

  <!-- Main Area -->
  <div class="dash-main">
    <header class="dash-topbar">
      <h1 class="page-title">{% block page_title %}Dashboard{% endblock %}</h1>
      <div class="topbar-right">
        <div class="user-pill">
          <i class="fas fa-circle-user"></i>
          {{ user.name }} &middot; <strong>{{ user.role|capitalize }}</strong>
        </div>
        <a href="{{ url_for('logout') }}" class="logout-link">
          <i class="fas fa-right-from-bracket"></i> Logout
        </a>
      </div>
    </header>

    <div class="dash-content">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% for category, message in messages %}
          <div class="flash-msg {{ category }}">
            <i class="fas {{ 'fa-check-circle' if category == 'success' else 'fa-exclamation-circle' }}"></i>
            {{ message }}
          </div>
        {% endfor %}
      {% endwith %}

      {% block content %}{% endblock %}
    </div>
  </div>

</div>

<script>
{% block extra_js %}{% endblock %}
</script>
</body>
</html>
