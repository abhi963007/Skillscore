{% extends "dashboard_base.html" %}
{% block title %}Manage Users{% endblock %}
{% block page_title %}Manage Users{% endblock %}
{% block content %}

<div class="grid-2">
  <div class="card-panel">
    <h3><i class="fas fa-user-plus"></i> Add New User</h3>
    <form method="POST" action="{{ url_for('admin_add_user') }}">
      <div class="form-group"><label>Full Name</label><input type="text" name="name" class="form-input" placeholder="Enter full name" required></div>
      <div class="form-group"><label>Email</label><input type="email" name="email" class="form-input" placeholder="user@example.com" required></div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div class="form-group"><label>Password</label><input type="password" name="password" class="form-input" placeholder="Password" required></div>
        <div class="form-group"><label>Role</label><select name="role" class="form-input" required><option value="student">Student</option><option value="teacher">Teacher</option><option value="admin">Admin</option></select></div>
      </div>
      <button type="submit" class="btn-primary"><i class="fas fa-plus"></i> Add User</button>
    </form>
  </div>

  <div class="card-panel">
    <h3><i class="fas fa-chart-pie"></i> User Statistics</h3>
    <div style="display:flex;flex-direction:column;gap:12px;margin-top:8px">
      <div style="display:flex;align-items:center;justify-content:space-between;padding:16px;background:#f8fafc;border-radius:10px;border:1px solid #f1f5f9">
        <div style="display:flex;align-items:center;gap:12px"><div style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#6366f1,#4f46e5);display:flex;align-items:center;justify-content:center;color:#fff;font-size:16px"><i class="fas fa-user-graduate"></i></div><span style="font-size:14px;font-weight:500;color:#475569">Students</span></div>
        <span style="font-size:20px;font-weight:800;color:#6366f1">110</span>
      </div>
      <div style="display:flex;align-items:center;justify-content:space-between;padding:16px;background:#f8fafc;border-radius:10px;border:1px solid #f1f5f9">
        <div style="display:flex;align-items:center;gap:12px"><div style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#10b981,#059669);display:flex;align-items:center;justify-content:center;color:#fff;font-size:16px"><i class="fas fa-chalkboard-user"></i></div><span style="font-size:14px;font-weight:500;color:#475569">Teachers</span></div>
        <span style="font-size:20px;font-weight:800;color:#10b981">15</span>
      </div>
      <div style="display:flex;align-items:center;justify-content:space-between;padding:16px;background:#f8fafc;border-radius:10px;border:1px solid #f1f5f9">
        <div style="display:flex;align-items:center;gap:12px"><div style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#f59e0b,#d97706);display:flex;align-items:center;justify-content:center;color:#fff;font-size:16px"><i class="fas fa-shield-halved"></i></div><span style="font-size:14px;font-weight:500;color:#475569">Admins</span></div>
        <span style="font-size:20px;font-weight:800;color:#f59e0b">3</span>
      </div>
    </div>
  </div>
</div>

<div class="card-panel">
  <h3><i class="fas fa-users"></i> All Users</h3>
  <table>
    <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Action</th></tr></thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td style="font-weight:500;color:#1e293b">{{ user[1] }}</td>
        <td>{{ user[2] }}</td>
        <td><span class="badge {{ 'blue' if user[3] == 'admin' else 'green' if user[3] == 'teacher' else 'yellow' }}">{{ user[3] | capitalize }}</span></td>
        <td><a href="{{ url_for('admin_delete_user', uid=user[0]) }}" class="btn-primary btn-sm btn-danger" onclick="return confirm('Delete this user?')"><i class="fas fa-trash"></i> Delete</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
