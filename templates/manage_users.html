{% extends "dashboard_base.html" %}

{% block title %}Manage Users | SkillScore{% endblock %}
{% block page_title %}Manage Users{% endblock %}

{% block content %}
<!-- Add New User -->
<div class="dash-panel">
  <h3><i class="fas fa-user-plus" style="color:#818cf8"></i> Add New User</h3>
  <form action="{{ url_for('admin_add_user') }}" method="POST" style="display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end">
    <div style="flex:1;min-width:180px">
      <label style="font-size:12px;color:rgba(255,255,255,.4);display:block;margin-bottom:6px">Full Name</label>
      <input type="text" name="name" placeholder="Enter name" required class="form-input" style="width:100%">
    </div>
    <div style="flex:1;min-width:200px">
      <label style="font-size:12px;color:rgba(255,255,255,.4);display:block;margin-bottom:6px">Email</label>
      <input type="email" name="email" placeholder="Enter email" required class="form-input" style="width:100%">
    </div>
    <div style="min-width:140px">
      <label style="font-size:12px;color:rgba(255,255,255,.4);display:block;margin-bottom:6px">Role</label>
      <select name="role" class="form-select" style="width:100%">
        <option value="student">Student</option>
        <option value="teacher">Teacher</option>
        <option value="admin">Admin</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary" style="height:42px"><i class="fas fa-plus"></i> Add User</button>
  </form>
  <p style="font-size:12px;color:rgba(255,255,255,.3);margin-top:12px">Default password: <code style="background:rgba(255,255,255,.08);padding:2px 8px;border-radius:4px;color:#818cf8">default123</code></p>
</div>

<!-- All Users -->
<div class="dash-panel">
  <h3><i class="fas fa-users" style="color:#c084fc"></i> All Users ({{ users|length }})</h3>
  <table class="dash-table">
    <thead>
      <tr><th>#</th><th>Name</th><th>Email</th><th>Role</th><th>Action</th></tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td style="font-weight:500;color:#f1f5f9">{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td><span class="badge badge-info">{{ u.role|capitalize }}</span></td>
        <td><a href="{{ url_for('admin_delete_user', uid=u.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Delete this user?')"><i class="fas fa-trash"></i> Delete</a></td>
      </tr>
      {% endfor %}
      {% if users|length == 0 %}
      <tr><td colspan="5" style="text-align:center;color:rgba(255,255,255,.3);padding:24px">No users found</td></tr>
      {% endif %}
    </tbody>
  </table>
</div>
{% endblock %}
