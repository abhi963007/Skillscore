{% extends "dashboard_base.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block page_title %}Admin Dashboard{% endblock %}
{% block content %}

<div class="welcome-banner">
  <div>
    <h2>Welcome, {{ session.get('user_name', 'Admin') }}!</h2>
    <p>Manage users, monitor exams, and keep the platform running smoothly.</p>
  </div>
  <div class="wb-icon"><i class="fas fa-shield-halved"></i></div>
</div>

<div class="stats-row">
  <div class="stat-card">
    <div class="sc-icon" style="background:linear-gradient(135deg,#6366f1,#4f46e5)"><i class="fas fa-users"></i></div>
    <div><div class="sc-val">128</div><div class="sc-label">Total Users</div></div>
  </div>
  <div class="stat-card">
    <div class="sc-icon" style="background:linear-gradient(135deg,#10b981,#059669)"><i class="fas fa-chalkboard-user"></i></div>
    <div><div class="sc-val">15</div><div class="sc-label">Teachers</div></div>
  </div>
  <div class="stat-card">
    <div class="sc-icon" style="background:linear-gradient(135deg,#f59e0b,#d97706)"><i class="fas fa-file-lines"></i></div>
    <div><div class="sc-val">42</div><div class="sc-label">Total Exams</div></div>
  </div>
  <div class="stat-card">
    <div class="sc-icon" style="background:linear-gradient(135deg,#ef4444,#dc2626)"><i class="fas fa-chart-line"></i></div>
    <div><div class="sc-val">89%</div><div class="sc-label">Pass Rate</div></div>
  </div>
</div>

<div class="quick-links">
  <a href="{{ url_for('manage_users') }}" class="ql-card"><div class="ql-icon" style="background:linear-gradient(135deg,#6366f1,#4f46e5)"><i class="fas fa-users-gear"></i></div><div class="ql-label">Manage Users</div></a>
  <a href="{{ url_for('all_exams') }}" class="ql-card"><div class="ql-icon" style="background:linear-gradient(135deg,#10b981,#059669)"><i class="fas fa-file-lines"></i></div><div class="ql-label">All Exams</div></a>
  <a href="{{ url_for('reports') }}" class="ql-card"><div class="ql-icon" style="background:linear-gradient(135deg,#f59e0b,#d97706)"><i class="fas fa-chart-bar"></i></div><div class="ql-label">Reports</div></a>
  <a href="{{ url_for('audit_logs') }}" class="ql-card"><div class="ql-icon" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed)"><i class="fas fa-clipboard-list"></i></div><div class="ql-label">Audit Logs</div></a>
  <a href="{{ url_for('settings') }}" class="ql-card"><div class="ql-icon" style="background:linear-gradient(135deg,#64748b,#475569)"><i class="fas fa-gear"></i></div><div class="ql-label">Settings</div></a>
</div>

<div class="grid-2">
  <div class="card-panel">
    <h3><i class="fas fa-user-plus"></i> Quick Add User</h3>
    <form method="POST" action="{{ url_for('admin_add_user') }}">
      <div class="form-group"><label>Full Name</label><input type="text" name="name" class="form-input" placeholder="Enter full name" required></div>
      <div class="form-group"><label>Email</label><input type="email" name="email" class="form-input" placeholder="user@example.com" required></div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div class="form-group"><label>Password</label><input type="password" name="password" class="form-input" placeholder="Password" required></div>
        <div class="form-group"><label>Role</label><select name="role" class="form-input" required><option value="student">Student</option><option value="teacher">Teacher</option><option value="admin">Admin</option></select></div>
      </div>
      <button type="submit" class="btn-primary" style="margin-top:4px"><i class="fas fa-plus"></i> Add User</button>
    </form>
  </div>

  <div class="card-panel">
    <h3><i class="fas fa-desktop"></i> Exam Monitoring</h3>
    <table>
      <thead><tr><th>Exam</th><th>Students</th><th>Status</th></tr></thead>
      <tbody>
        <tr><td>Python Basics</td><td>45</td><td><span class="badge green">Active</span></td></tr>
        <tr><td>Aptitude Mock</td><td>62</td><td><span class="badge blue">Scheduled</span></td></tr>
        <tr><td>Java Test</td><td>38</td><td><span class="badge yellow">Completed</span></td></tr>
        <tr><td>DBMS Quiz</td><td>50</td><td><span class="badge green">Active</span></td></tr>
      </tbody>
    </table>
  </div>
</div>

<div class="card-panel">
  <h3><i class="fas fa-chart-pie"></i> Platform Overview</h3>
  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px">
    <div style="padding:20px;background:#f8fafc;border-radius:12px;text-align:center;border:1px solid #f1f5f9">
      <div style="font-size:28px;font-weight:800;color:#6366f1">95%</div>
      <div style="font-size:12px;color:#94a3b8;margin-top:4px">Placement Rate</div>
    </div>
    <div style="padding:20px;background:#f8fafc;border-radius:12px;text-align:center;border:1px solid #f1f5f9">
      <div style="font-size:28px;font-weight:800;color:#10b981">1,240</div>
      <div style="font-size:12px;color:#94a3b8;margin-top:4px">Exams Taken</div>
    </div>
    <div style="padding:20px;background:#f8fafc;border-radius:12px;text-align:center;border:1px solid #f1f5f9">
      <div style="font-size:28px;font-weight:800;color:#f59e0b">4.8/5</div>
      <div style="font-size:12px;color:#94a3b8;margin-top:4px">User Rating</div>
    </div>
  </div>
</div>

{% endblock %}
