{% extends "dashboard_base.html" %}

{% block title %}MCQ Generator{% endblock %}
{% block page_title %}Auto MCQ Generator{% endblock %}

{% block extra_css %}
.mcq-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:24px;margin-bottom:16px;border-left:3px solid #6366f1;transition:all .3s}
.mcq-card:hover{background:rgba(255,255,255,.06)}
.mcq-card .mcq-q{font-weight:600;color:#f1f5f9;margin-bottom:14px;font-size:14px}
.mcq-card label{display:block;margin:6px 0;font-size:13.5px;color:rgba(255,255,255,.6);padding:8px 14px;border-radius:8px;cursor:default}
.mcq-card label input{margin-right:8px;accent-color:#6366f1}
.mcq-answer{color:#4ade80;font-weight:600;margin-top:12px;font-size:13.5px;display:flex;align-items:center;gap:8px}
.mcq-desc{color:rgba(255,255,255,.4);font-size:13px;margin-top:6px;padding-left:22px}
{% endblock %}

{% block content %}
<div class="dash-panel">
  <h3><i class="fas fa-robot" style="color:#f97316"></i> Upload Notes to Generate MCQs</h3>
  <form method="POST" enctype="multipart/form-data" style="display:flex;gap:14px;align-items:flex-end;flex-wrap:wrap">
    <div style="flex:1;min-width:250px">
      <label style="font-size:12px;color:rgba(255,255,255,.4);display:block;margin-bottom:6px">Select Text File</label>
      <input type="file" name="notes" required class="form-input" style="width:100%">
    </div>
    <button type="submit" class="btn btn-primary" style="height:42px"><i class="fas fa-magic"></i> Generate MCQs</button>
  </form>
</div>

{% if mcqs %}
<div class="dash-panel">
  <h3><i class="fas fa-list-check" style="color:#4ade80"></i> Generated Questions ({{ mcqs|length }})</h3>
  {% for mcq in mcqs %}
  <div class="mcq-card">
    <div class="mcq-q">Q{{ loop.index }}. {{ mcq.question }}</div>
    {% for opt in mcq.options %}
      <label><input type="radio" name="gen_q{{ loop.parent.loop.index }}" disabled> {{ opt }}</label>
    {% endfor %}
    <div class="mcq-answer"><i class="fas fa-check-circle"></i> Correct: {{ mcq.answer }}</div>
    <div class="mcq-desc"><i class="fas fa-info-circle"></i> {{ mcq.description }}</div>
  </div>
  {% endfor %}
</div>
{% endif %}
{% endblock %}
