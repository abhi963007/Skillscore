{% extends "dashboard_base.html" %}

{% block title %}Exam Results{% endblock %}
{% block page_title %}Exam Results{% endblock %}

{% block extra_css %}
.result-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}
.result-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:24px;transition:all .3s}
.result-card:hover{background:rgba(255,255,255,.06);transform:translateY(-3px)}
.result-card .stu-name{font-size:16px;font-weight:600;color:#f1f5f9;margin-bottom:14px;display:flex;align-items:center;gap:10px}
.result-card .stu-name i{color:#818cf8}
.score-circle{width:80px;height:80px;border-radius:50%;margin:12px auto;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;color:#fff}
.score-pass{background:linear-gradient(135deg,#10b981,#059669)}
.score-fail{background:linear-gradient(135deg,#ef4444,#dc2626)}
.res-row{display:flex;justify-content:space-between;padding:8px 0;font-size:13.5px;border-bottom:1px solid rgba(255,255,255,.04);color:rgba(255,255,255,.6)}
.res-row:last-child{border-bottom:none}
.res-row strong{color:rgba(255,255,255,.5)}
{% endblock %}

{% block content %}
<div class="result-cards" id="resultsContainer"></div>
{% endblock %}

{% block extra_js %}
const stuData = [
  {name:"Anu Thomas",subjects:{Java:78,Python:82,DBMS:70},aptitude:85,date:"10 Feb 2026"},
  {name:"Rahul Nair",subjects:{Java:45,Python:52,DBMS:40},aptitude:48,date:"10 Feb 2026"},
  {name:"Mariya Jose",subjects:{Java:88,Python:90,DBMS:84},aptitude:92,date:"10 Feb 2026"}
];
const rc = document.getElementById("resultsContainer");
stuData.forEach(s=>{
  const vals=Object.values(s.subjects);
  const avg=Math.round(vals.reduce((a,b)=>a+b,0)/vals.length);
  const overall=Math.round((avg+s.aptitude)/2);
  const pass=overall>=50;
  let subHTML="";
  for(let k in s.subjects) subHTML+='<div class="res-row"><span>'+k+'</span><span style="color:#f1f5f9;font-weight:500">'+s.subjects[k]+'%</span></div>';
  rc.innerHTML+='<div class="result-card"><div class="stu-name"><i class="fas fa-user-circle"></i>'+s.name+'</div><div class="score-circle '+(pass?'score-pass':'score-fail')+'">'+overall+'%</div><div class="res-row"><strong>Aptitude</strong><span style="color:#f1f5f9">'+s.aptitude+'%</span></div><div class="res-row"><strong>Status</strong><span class="badge '+(pass?'badge-success':'badge-danger')+'">'+(pass?'PASS':'FAIL')+'</span></div><div class="res-row"><strong>Date</strong><span>'+s.date+'</span></div><div style="margin-top:12px;border-top:1px solid rgba(255,255,255,.06);padding-top:12px"><strong style="font-size:12px;color:rgba(255,255,255,.35);text-transform:uppercase;letter-spacing:.5px">Subject-wise</strong>'+subHTML+'</div></div>';
});
{% endblock %}
